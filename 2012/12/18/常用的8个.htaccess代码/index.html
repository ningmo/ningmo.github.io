<!DOCTYPE html>
<html lang>
  <head><meta name="generator" content="Hexo 3.9.0">
    
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">



  <meta name="description" content="常用的8个.htaccess代码">








  <link rel="alternate" href="/default" title="追寻一颗宁静的心">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=1.1">



<link rel="canonical" href="http://ningmo.github.io/2012/12/18/常用的8个.htaccess代码/">


<meta name="description" content="htAccess 文件（Hypertext Access file）是Apache Web服务器的一个非常强大的配置文件，对于这个文件，Apache有一堆参数可以让你配置出几乎随心所欲的功能。1.使用.htaccess挡掉搜寻引擎机蜘蛛2.使用.htaccess封锁某国家IP网段3.使用.htaccess防止图片、文件盗链4.使用.htaccess来保护主机下的目录与文件5.使用.htaccess">
<meta property="og:type" content="article">
<meta property="og:title" content="常用的8个.htaccess代码">
<meta property="og:url" content="http://ningmo.github.io/2012/12/18/常用的8个.htaccess代码/index.html">
<meta property="og:site_name" content="追寻一颗宁静的心">
<meta property="og:description" content="htAccess 文件（Hypertext Access file）是Apache Web服务器的一个非常强大的配置文件，对于这个文件，Apache有一堆参数可以让你配置出几乎随心所欲的功能。1.使用.htaccess挡掉搜寻引擎机蜘蛛2.使用.htaccess封锁某国家IP网段3.使用.htaccess防止图片、文件盗链4.使用.htaccess来保护主机下的目录与文件5.使用.htaccess">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://g.hiphotos.baidu.com/album/pic/item/79f0f736afc37931448918d1ebc4b74542a91160.jpg">
<meta property="og:image" content="http://b.hiphotos.baidu.com/album/pic/item/78310a55b319ebc4e699e8618226cffc1f171660.jpg">
<meta property="og:updated_time" content="2019-08-23T09:24:57.309Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="常用的8个.htaccess代码">
<meta name="twitter:description" content="htAccess 文件（Hypertext Access file）是Apache Web服务器的一个非常强大的配置文件，对于这个文件，Apache有一堆参数可以让你配置出几乎随心所欲的功能。1.使用.htaccess挡掉搜寻引擎机蜘蛛2.使用.htaccess封锁某国家IP网段3.使用.htaccess防止图片、文件盗链4.使用.htaccess来保护主机下的目录与文件5.使用.htaccess">
<meta name="twitter:image" content="http://g.hiphotos.baidu.com/album/pic/item/79f0f736afc37931448918d1ebc4b74542a91160.jpg">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=1.1">
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">





<script type="text/javascript">
  var themeConfig = {
    fancybox: {
      enable: false
    },
  };
</script>




  



    <title> 常用的8个.htaccess代码 - 追寻一颗宁静的心 </title>
  </head>

  <body>
    <div id="page">
      <header id="masthead"><div class="site-header-inner">
    <h1 class="site-title">
        <a href="/." class="logo">追寻一颗宁静的心</a>
    </h1>

    <nav id="nav-top">
        
            <ul id="menu-top" class="nav-top-items">
                
                    <li class="menu-item">
                        <a href="/archives">
                            
                            
                                Archives
                            
                        </a>
                    </li>
                
                    <li class="menu-item">
                        <a href="/about">
                            
                            
                                About
                            
                        </a>
                    </li>
                
            </ul>
        
  </nav>
</div>

      </header>
      <div id="content">
        
    <div id="primary">
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          常用的8个.htaccess代码
        
      </h1>

      <time class="post-time">
          Dec 18 2012
      </time>
    </header>



    
            <div class="post-content">
            <p>htAccess 文件（Hypertext Access file）是Apache Web服务器的一个非常强大的配置文件，对于这个文件，Apache有一堆参数可以让你配置出几乎随心所欲的功能。<br>1.使用.htaccess挡掉搜寻引擎机蜘蛛<br>2.使用.htaccess封锁某国家IP网段<br>3.使用.htaccess防止图片、文件盗链<br>4.使用.htaccess来保护主机下的目录与文件<br>5.使用.htaccess 自定义的出错页面<br>6.把某些特殊的IP地址的请求重定向到别的站点<br>7.把老的域名转像新的域名<br>8.更改默认首页/默认文档顺序<br>使用:创建名为 .htaccess 的文件(用工具比如UE另存为.htaccess,windows记事本不行),放到站点程序根目录即可生效.</p>
<p><strong>使用.htaccess挡掉搜寻引擎机蜘蛛</strong></p>
<p>挡掉百度搜寻引擎</p>
<p>百度是传说中的暴力搜寻引擎，不遵守搜寻引擎的规则，若你尝试使用robot.txt来挡住，那非常恭喜你，绝对无效。所以一定要使用比较暴力、强硬的手段才能，因此透过.htaccess就可以处理了，如果你要挡掉一些搜寻引擎（像是百度、搜狗等），那请将以下程式码贴到htaccess.txt文件中。</p>
<p>SetEnvIfNoCase User-Agent “^Baidu” bad_bot<br>SetEnvIfNoCase User-Agent “^sogou” bad_bot<br>SetEnvIfNoCase User-Agent “^Bloghoo” bad_bot<br>SetEnvIfNoCase User-Agent “^Scooter” bad_bot<br>Deny from env=bad_bot</p>
<p>挡掉Google搜寻引擎</p>
<p>如果你想要挡掉Google搜寻引擎，当然也可以透过.htaccsee挡掉，只要输入以下程式码就可以了，如果要连同暴力百度搜寻引擎一起封锁，那就把这两串程式码放在同一个htaccsee.txt文件中。</p>
<p>SetEnvIf User-Agent “^Googlebot” google<br>Deny from env=google</p>
<p><strong>用.htaccess封锁某国家IP网段</strong></p>
<p>有时候自己可能会规画网站的发展方向，有不欢迎某些特定的国家来访，这时候第一个想法应该是要锁该国家的IP，但是却不知从何做起？因为不知道那个国家的IP跟本不能锁，这时候可以透过「blockacountry」线上工具网站产生的htaccess语法来替自己封锁想要封锁的IP网段国家。</p>
<p>第1步 来到Block a country（<a href="http://www.blockacountry.com/" target="_blank">http://www.blockacountry.com</a>） 网站首页，首先你会看到一个框框，框框中有许多国家，请您挑选要封锁的国家，可以复选，选择完成后请点击下方的﹝Block Now！﹞。</p>
<p><img title="国外IP" alt="国外IP" src="http://g.hiphotos.baidu.com/album/pic/item/79f0f736afc37931448918d1ebc4b74542a91160.jpg" width="640" height="518"> <img title="国外IP" alt="国外IP" src="http://b.hiphotos.baidu.com/album/pic/item/78310a55b319ebc4e699e8618226cffc1f171660.jpg" width="527" height="584"></p>
<p>第2步 将刚刚网页上产生的程式码贴到htaccess文件中，然后储存。Apache对于被拒绝的IP会返回403错误。</p>
<p><strong>用.htaccess防止图片、文件盗链</strong></p>
<p>一个图文并茂的网站，最怕的就是文章转贴，虽然现一直在尊重着作权法，但还是有许多人假装没看见？许多人喜欢「复制→贴上」，但这样一个转贴动作却会对一个网站造成莫大的伤害，除了辛苦写的文章被偷走外，连图片也盗链！图片或文件被盗连最怕的就是后续的流量，为了避免这种问题，我们必须自立自强，防止盗链这种可恶的行为！</p>
<p>如果是cPanel虚拟主机，防盗连的方法不外乎就是到cPanel后台进行设定。如果你是其他类型的空间后台或者是说你只有FTP权限的空间，那该怎么办呢？其实只要你的空间支持.htaccess文件并且支持ReWrite，你都可以防止图片与文件的盗链！</p>
<p>通过.htaccess来防止网站的图片、压缩文件、或视频等非Html文件被盗链的方法相当简单，通过在该文件中加入几句命令即可保护我们宝贵的带宽。例如chinaz.com的设置如下：</p>
<p>以下为引用的内容：<br>RewriteEngine on<br>RewriteCond %{HTTP_REFERER} !^$ [NC]<br>RewriteCond %{HTTP_REFERER} !nobing.cn [NC]<br>RewriteCond %{HTTP_REFERER} !google.com [NC]<br>RewriteCond %{HTTP_REFERER} !baidu.com [NC]<br>RewriteCond %{HTTP_REFERER} !<a href="http://www.domain.com" target="_blank" rel="noopener">www.domain.com</a> [NC]<br>RewriteRule .*.(gif|jpg)$ <a href="http://www.admin5.com/no.png" target="_blank">http://www.admin5.com/no.png</a> [R,NC,L]</p>
<p>代码详细介绍：<a href="http://www.chinaz.com/Server/Linux/0GX33302009.html" target="_blank">Apache服务器使用.htaccess实现图片防盗链</a></p>
<p><strong>利用.htaccess来保护主机下的目录与文件</strong></p>
<p>一般来说很多虚拟主机预设是没有开启保护网站主机目录下的文件，其实很危险的，假若你的目录下忘记放置index文件，那很可能您目录就被看光，一个不小心很可能重要资料就被拿走，这是蛮严重的一件事情。如果是Linux主机，我们可以透过简易的.htaccess语法来保护网站主机目录下的文件，让别人无法轻易看见。</p>
<p>平常我们使用的最简单保护目录的方法，莫过于使用「index.php」、「index.html」等等之类的网站index文件，因为主机内预设的设定在目录中预设就是要抓index文件，而index文件通常会有很多种，主机会依续排列下来抓取，所以可以设定index文件来让主机抓取，以达到保护目录的效果。但如果主机需要的index文件没有一个存在，这时候主机就会直接显示目录内的东西了，因为主机不知道要抓取谁当作主要网页，所以会全部显示。</p>
<p>虽然使用index文件来保护目录是可行的，但是每个子目录都需要传一个index文件其实蛮累人的，这时候我们就可以利用「.htaccess」来批量处理。</p>
<p>Options -Indexes</p>
<p>语法的进阶使用</p>
<p>当然该语法还有其他相关的用途，以下列出简单的几项供大家参考使用，如果你觉得以下的语法不是你想要或是想学更多，你可以到Apache官方网站来看看英文说明书，查看看还有什么关于「indexoptions」的用途或是其他不错的功能喔！</p>
<p>Options +Indexes：显示目录下所有文件</p>
<p>Options -Indexes：隐藏目录下所有文件 （上面已经介绍过）</p>
<p>IndexOptions +FancyIndexing：显示目录下所有文件，文件前面包含档案类型的小图示</p>
<p>IndexOptions -FancyIndexing ： 显示目录下所有文件，但不包含文件类型的小图示</p>
<p>IndexIgnore *.php *.exe：隐藏特定的文件， 其余文件正常显示（隐藏所有的php和exe文件）</p>
<p><strong>使用.htaccess 创建自定义的出错页面</strong></p>
<p>对于Linux Apache来说这是一项极其简单的事情。使用下面的.htaccess语法你可以轻松的完成这一功能。（把.htaccess放在你的网站根目录下）</p>
<p>ErrorDocument 401 /error/401.php<br>ErrorDocument 403 /error/403.php<br>ErrorDocument 404 /error/404.php<br>ErrorDocument 500 /error/500.php后缀可随意更改为服务器支持的格式,如: ErrorDocument 401 /error/401.htm</p>
<p><strong>把某些特殊的IP地址的请求重定向到别的站点</strong></p>
<p>ErrorDocument 403 <a href="http://www.youdomain.com/" target="_blank">http://www.youdomain.com</a>Order deny，allow<br>Deny from all<br>Allow from 124.34.48.165<br>Allow from 102.54.68.123</p>
<p><strong>把老的域名转像新的域名</strong></p>
<h1 id="redirect-from-old-domain-to-new-domain"><a href="#redirect-from-old-domain-to-new-domain" class="headerlink" title="redirect from old domain to new domain"></a>redirect from old domain to new domain</h1><p>RewriteEngine On<br>RewriteRule ^(.*) $<a href="http://www.yourdomain.com/$1" target="_blank" rel="noopener">http://www.yourdomain.com/$1</a> [R=301，L]</p>
<p><strong>更改默认首页/默认文档顺序</strong></p>
<p>DirectoryIndex filename.ext index.html index.htm index.php index.cgi index.pl index.shtml</p>

            </div>
          

    
      <footer class="post-footer">
		

        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2012/12/18/Redirect重定向/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">Redirect重定向</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/2012/12/18/Apache Rewrite 规则详解/">
        <span class="next-text nav-default">Apache Rewrite 规则详解</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

        
  <div class="comments" id="comments">
    
  </div>


      </footer>
    
  </article>

    </div>

      </div>

      <footer id="colophon"><span class="copyright-year">
    
        &copy;
    
        2014 -
    
    2019
    <span class="footer-author">ningmo.</span>
    <span class="power-by">
        Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a> and <a class="theme-link" href="https://github.com/frostfan/hexo-theme-polarbear">Polar Bear</a>
    </span>
</span>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>
    


    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  

    <script type="text/javascript" src="/js/src/theme.js?v=1.1"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=1.1"></script>

  </body>
</html>
